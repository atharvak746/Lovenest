{% extends "base.html" %}

{% block title %}Period Tracker - LoveNest{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">
            <i class="fas fa-calendar-alt mr-2 text-love-pink"></i>
            Period Tracker
        </h1>
        <p class="text-gray-600">Track your cycle and share important information with your partner</p>
    </div>
    
    <!-- Add Period Entry -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-xl font-semibold text-gray-800 mb-4">Add Period Entry</h2>
        <form method="POST" action="{{ url_for('add_period') }}" class="space-y-4">
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label for="start_date" class="block text-sm font-medium text-gray-700 mb-2">Start Date</label>
                    <input type="date" id="start_date" name="start_date" required
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-love-pink focus:border-transparent">
                </div>
                <div>
                    <label for="end_date" class="block text-sm font-medium text-gray-700 mb-2">End Date (optional)</label>
                    <input type="date" id="end_date" name="end_date"
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-love-pink focus:border-transparent">
                </div>
            </div>
            
            <div>
                <label for="flow_level" class="block text-sm font-medium text-gray-700 mb-2">Flow Level</label>
                <select id="flow_level" name="flow_level" required
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-love-pink focus:border-transparent">
                    <option value="">Select flow level</option>
                    <option value="light">Light</option>
                    <option value="medium">Medium</option>
                    <option value="heavy">Heavy</option>
                </select>
            </div>
            
            <div>
                <label for="symptoms" class="block text-sm font-medium text-gray-700 mb-2">Symptoms (optional)</label>
                <input type="text" id="symptoms" name="symptoms"
                       placeholder="e.g., cramps, headache, mood swings"
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-love-pink focus:border-transparent">
            </div>
            
            <div>
                <label for="notes" class="block text-sm font-medium text-gray-700 mb-2">Notes (optional)</label>
                <textarea id="notes" name="notes" rows="3"
                          placeholder="Any additional notes or observations"
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-love-pink focus:border-transparent"></textarea>
            </div>
            
            <button type="submit" 
                    class="gradient-bg text-white px-6 py-2 rounded-md hover:opacity-90 transition-opacity">
                <i class="fas fa-plus mr-2"></i>
                Add Entry
            </button>
        </form>
    </div>
    
    <!-- Period History -->
    {% if periods %}
    <div class="bg-white rounded-xl shadow-lg p-6">
        <h2 class="text-xl font-semibold text-gray-800 mb-6">Period History</h2>
        <div class="space-y-4">
            {% for period in periods %}
            <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                <div class="flex justify-between items-start mb-3">
                    <div>
                        <h3 class="font-semibold text-gray-800">
                            {{ period[0].strftime('%B %d, %Y') }}
                            {% if period[1] %}
                            - {{ period[1].strftime('%B %d, %Y') }}
                            {% endif %}
                        </h3>
                        <p class="text-sm text-gray-600">
                            Duration: 
                            {% if period[1] %}
                            {{ (period[1] - period[0]).days + 1 }} days
                            {% else %}
                            Ongoing
                            {% endif %}
                        </p>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-medium
                               {% if period[2] == 'light' %}bg-green-100 text-green-800
                               {% elif period[2] == 'medium' %}bg-yellow-100 text-yellow-800
                               {% else %}bg-red-100 text-red-800{% endif %}">
                        {{ period[2].title() }} Flow
                    </span>
                </div>
                
                {% if period[3] %}
                <div class="mb-2">
                    <p class="text-sm text-gray-600">
                        <strong>Symptoms:</strong> {{ period[3] }}
                    </p>
                </div>
                {% endif %}
                
                {% if period[4] %}
                <div class="mb-2">
                    <p class="text-sm text-gray-600">
                        <strong>Notes:</strong> {{ period[4] }}
                    </p>
                </div>
                {% endif %}
                
                <p class="text-xs text-gray-500">
                    <i class="fas fa-clock mr-1"></i>
                    Added on {{ period[5].strftime('%B %d, %Y at %I:%M %p') }}
                </p>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="bg-white rounded-xl shadow-lg p-8 text-center">
        <i class="fas fa-calendar-alt text-6xl text-gray-300 mb-4"></i>
        <h3 class="text-xl font-semibold text-gray-500 mb-2">No entries yet</h3>
        <p class="text-gray-400">Start tracking to build your cycle history</p>
    </div>
    {% endif %}
</div>
{% endblock %}
